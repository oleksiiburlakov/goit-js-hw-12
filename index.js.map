{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.list');\n\nexport function renderImages(images) {\n    return images.map(imgTemplate).join('');\n\n}\n\nexport function imgTemplate(img) {\n    return `\n    <li class='elem-list'>\n        <div class=\"gallery\">\n            <a href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" loading=\"lazy\" alt=\"${img.tags}\" title=\"${img.tags}\" class='image'/>\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${img.likes}</p>\n                <p><strong>Views:</strong> ${img.views}</p>\n                <p><strong>Comments:</strong> ${img.comments}</p>\n                <p><strong>Downloads:</strong> ${img.downloads}</p>\n            </div>\n        </div>\n        </li>`;\n}","import { renderImages } from './render-function.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst loader = document.querySelector('.loader');\nconst list = document.querySelector('.list');\nconst btnMore = document.querySelector('.btn-more');\n\nlet page = 1;\nlet limit = 15;\nbtnMore.style.display = 'none';\nif (loader) loader.style.display = 'none';\n\nconst key = '48428320-38598d28b4d5228a2fffcb2e3';\nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function findMyFetch(query, page = 1, limit = 20, append = false) {\n\n    if (loader) loader.style.display = '';\n\n    const url = `${baseUrl}?key=${key}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${limit}&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n\n        if (loader) loader.style.display = 'none';\n\n        if (!data.hits || data.hits.length === 0) {\n            btnMore.style.display = 'none';\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                timeout: 5000,\n                position: 'topRight',\n            });\n            return\n        } else {\n            const markup = renderImages(data.hits);\n            if (append) {\n                list.insertAdjacentHTML('beforeend', markup);\n            } else {\n                list.innerHTML = markup;\n            }\n\n            btnMore.style.display = '';\n        }\n\n        return data;\n    } catch(error) {\n        btnMore.style.display = 'none';\n        iziToast.error({\n            message: error.message,\n            timeout: 5000,\n            position: 'topRight',\n        });\n        if (loader) loader.style.display = 'none';\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { findMyFetch } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-function.js';\n\nconst input = document.querySelector('#text');\nconst list = document.querySelector('.list');\nconst btn = document.querySelector('.search');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn-more');\n\nbtnMore.style.display = 'none';\n\nloader.style.display = 'none';\nlet page = 1;\nlet limit = 15;\nlet val = '';\n\nlet newLightbox = new SimpleLightbox('.list a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    animationSlide: true,\n});\n\ninput.addEventListener('input', ev =>{\n    val = ev.target.value;\n    if(val.trim() === ''){\n        input.value = '';\n    }\n});\n\nbtn.addEventListener('click', async (ev) => {\n    ev.preventDefault();\n\n    page = 1;\n    if(page === 1){\n        btnMore.style.display = 'none';\n    }\n\n    val = input.value.trim();\n    if(!val || val.trim() === ''){\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            timeout: 5000,\n            position: 'topRight',\n        })\n\n    } list.innerHTML = '';\n        try {\n            loader.style.display = '';\n            const response = await findMyFetch(val, page, limit);\n            loader.style.display = 'none';\n\n            if (!response.hits || response.hits.length === 0) {\n                return iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    timeout: 5000,\n                    position: 'topRight',\n                });\n            }\n\n            list.innerHTML = renderImages(response.hits);\n            newLightbox.refresh();\n\n            const totalPages = Math.ceil(response.totalHits / limit);\n\n            if (totalPages <= 1) {\n                btnMore.style.display = 'none';\n            } else {\n                btnMore.style.display = '';\n            }\n\n        } catch (error) {\n            loader.style.display = 'none';\n            return;\n        }\n\n});\n\nbtnMore.addEventListener('click', async () => {\n    page += 1;\n\n    loader.style.display = '';\n    btnMore.style.display = 'none';\n\n    try {\n        const response = await findMyFetch(val, page, limit, true);\n\n        loader.style.display = 'none';\n\n        newLightbox.refresh();\n\n        const firstCard = document.querySelector('.list li');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height; // Один раз визначаємо висоту\n\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n\n        const totalPages = Math.ceil(response.totalHits / limit);\n        if (page >= totalPages) {\n            btnMore.style.display = 'none';\n            iziToast.info({\n                position: \"topRight\",\n                message: \"You've reached the end of the results\",\n            });\n        } else {\n            btnMore.style.display = '';\n        }\n\n    } catch (error) {\n        loader.style.display = 'none';\n        btnMore.style.display = 'none';\n    }\n});"],"names":["renderImages","images","imgTemplate","img","loader","list","btnMore","key","baseUrl","findMyFetch","query","page","limit","append","url","data","axios","iziToast","markup","error","input","btn","val","newLightbox","SimpleLightbox","ev","response","firstCard","cardHeight","totalPages"],"mappings":"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"}